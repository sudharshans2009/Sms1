<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amrita Vidyalayam Ettimadai - School Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Custom Stylesheets (Separated for better organization) -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle">
        <i class="bi bi-moon-fill" id="themeIcon"></i>
    </button>

    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-card animate__animated animate__fadeIn">
            <div class="login-logo">
                <i class="bi bi-mortarboard-fill"></i>
                <h2>Amrita Vidyalayam</h2>
                <p>Ettimadai - School Management System</p>
            </div>
            
            <div class="user-type-selector">
                <div class="user-type-btn active" data-role="admin">
                    <i class="bi bi-shield-lock"></i>
                    <div>Admin</div>
                </div>
                <div class="user-type-btn" data-role="teacher">
                    <i class="bi bi-person-workspace"></i>
                    <div>Teacher</div>
                </div>
                <div class="user-type-btn" data-role="student">
                    <i class="bi bi-book"></i>
                    <div>Student</div>
                </div>
                <div class="user-type-btn" data-role="driver">
                    <i class="bi bi-bus-front"></i>
                    <div>Driver</div>
                </div>
            </div>
            
            <form id="loginForm">
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="email" placeholder="name@example.com" required>
                    <label for="email">Email address</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="password" class="form-control" id="password" placeholder="Password" required>
                    <label for="password">Password</label>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="rememberMe">
                    <label class="form-check-label" for="rememberMe">
                        Remember me
                    </label>
                </div>
                <button type="submit" class="btn btn-login">Sign In</button>
                <div class="text-center mt-3">
                    <a href="#" class="text-decoration-none">Forgot password?</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard-container" id="dashboardPage">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <i class="bi bi-mortarboard-fill" style="font-size: 30px; color: white;"></i>
                <div class="sidebar-logo">Amrita Vidyalayam</div>
            </div>
            
            <ul class="sidebar-menu" id="sidebarMenu">
                <!-- Menu items will be dynamically generated based on user role -->
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="search-bar">
                        <i class="bi bi-search"></i>
                        <input type="text" placeholder="Search for anything...">
                    </div>
                </div>
                <div class="header-right">
                    <button class="notification-btn">
                        <i class="bi bi-bell"></i>
                        <span class="notification-badge">5</span>
                    </button>
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar">JD</div>
                        <div class="user-info">
                            <div class="user-name" id="userName">John Doe</div>
                            <div class="user-role" id="userRole">Administrator</div>
                        </div>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div id="dashboardContent">
                <!-- Welcome Section -->
                <div class="dashboard-welcome animate__animated animate__fadeIn">
                    <div class="welcome-content">
                        <h1 class="welcome-title">Welcome back, <span id="welcomeName">John</span>!</h1>
                        <p class="welcome-subtitle">Here's what's happening at Amrita Vidyalayam today.</p>
                        <div class="current-time" id="currentTime">10:30 AM</div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats will be dynamically generated -->
                </div>

                <!-- Content Grid -->
                <div class="content-grid">
                    <!-- Recent Activities -->
                    <div class="content-card animate__animated animate__fadeInUp">
                        <div class="card-header">
                            <h3 class="card-title">Recent Activities</h3>
                            <button class="card-action">View All</button>
                        </div>
                        <ul class="activity-list" id="activityList">
                            <!-- Activities will be dynamically generated -->
                        </ul>
                    </div>

                    <!-- Announcements -->
                    <div class="content-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                        <div class="card-header">
                            <h3 class="card-title">Announcements</h3>
                            <button class="card-action" id="viewAllAnnouncementsBtn">View All</button>
                        </div>
                        <div id="announcementsList">
                            <!-- Announcements will be dynamically generated -->
                        </div>
                    </div>
                </div>

                <!-- Features Grid -->
                <h3 class="mb-3">Quick Access</h3>
                <div class="features-grid" id="featuresGrid">
                    <!-- Features will be dynamically generated based on user role -->
                </div>
            </div>

            <!-- Students Content -->
            <div id="studentsContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Students Management</h3>
                        <button class="btn btn-primary" id="addStudentBtn" onclick="showAddStudentModal()">Add Student</button>
                    </div>
                    <div class="tabs-container">
                        <div class="tabs-header">
                            <button class="tab-btn active" data-tab="all-students">All Students</button>
                            <button class="tab-btn" data-tab="lkg-10">LKG - Class 10</button>
                            <button class="tab-btn" data-tab="11-12">Class 11 - 12</button>
                        </div>
                        
                        <div class="tab-content active" id="all-students">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Class</th>
                                            <th>Section</th>
                                            <th>Parent Contact</th>
                                            <th>Bus</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="studentsTableBody">
                                        <!-- Students will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="lkg-10">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Class</th>
                                            <th>Section</th>
                                            <th>Parent Contact</th>
                                            <th>Bus</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="lkg10TableBody">
                                        <!-- LKG-10 students will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="11-12">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Class</th>
                                            <th>Section</th>
                                            <th>Student Contact</th>
                                            <th>Parent Contact</th>
                                            <th>Bus</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="class11_12TableBody">
                                        <!-- Class 11-12 students will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Export Data Section -->
                    <div class="content-card mt-4 animate__animated animate__fadeIn">
                        <div class="card-header">
                            <h3 class="card-title">Export Data</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Export Type</label>
                                <select class="form-control-lg" id="exportTypeSelect" onchange="handleExportTypeChange()">
                                    <option value="">Select Export Type</option>
                                    <option value="all_students">All Students Data</option>
                                    <option value="all_teachers">All Teachers Data</option>
                                    <option value="class_students">Students by Class</option>
                                    <option value="section_students">Students by Section</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="exportClassGroup" style="display: none;">
                                <label class="form-label">Select Class</label>
                                <select class="form-control-lg" id="exportClassSelect">
                                    <option value="">Select Class</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="exportSectionGroup" style="display: none;">
                                <label class="form-label">Select Section</label>
                                <select class="form-control-lg" id="exportSectionSelect">
                                    <option value="">Select Section</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                </select>
                            </div>
                            
                            <button class="btn btn-success" onclick="exportData()">
                                <i class="bi bi-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teachers Content -->
            <div id="teachersContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Teachers Management</h3>
                        <button class="btn btn-primary" id="addTeacherBtn" onclick="showAddTeacherModal()">Add Teacher</button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Subject</th>
                                    <th>Class Teacher</th>
                                    <th>Contact</th>
                                    <th>Email</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="teachersTableBody">
                                <!-- Teachers will be dynamically generated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Classes Content -->
            <div id="classesContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Classes Management</h3>
                        <button class="btn btn-primary" id="addClassBtn" onclick="showAddClassModal()">Add Class</button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>Section</th>
                                    <th>Class Teacher</th>
                                    <th>Students Count</th>
                                    <th>Class Head</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="classesTableBody">
                                <!-- Classes will be dynamically generated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Attendance Content -->
            <div id="attendanceContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Attendance Management</h3>
                        <button class="btn btn-primary" onclick="showMarkAttendanceModal()">Mark Attendance</button>
                    </div>
                    <div class="tabs-container">
                        <div class="tabs-header">
                            <button class="tab-btn active" data-tab="today-attendance">Today's Attendance</button>
                            <button class="tab-btn" data-tab="attendance-report">Attendance Report</button>
                        </div>
                        
                        <div class="tab-content active" id="today-attendance">
                            <div class="form-group">
                                <label class="form-label">Select Class</label>
                                <select class="form-control-lg" id="attendanceClassSelect">
                                    <option value="">Select Class</option>
                                    <!-- Options will be dynamically generated -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Select Section</label>
                                <select class="form-control-lg" id="attendanceSectionSelect">
                                    <option value="">Select Section</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                </select>
                            </div>
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Student ID</th>
                                            <th>Name</th>
                                            <th>Present</th>
                                            <th>Absent</th>
                                            <th>Leave</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendanceTableBody">
                                        <!-- Attendance will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="attendance-report">
                            <div class="form-group">
                                <label class="form-label">Select Class</label>
                                <select class="form-control-lg" id="attendanceReportClassSelect">
                                    <option value="">Select Class</option>
                                    <!-- Options will be dynamically generated -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Select Month</label>
                                <select class="form-control-lg" id="reportMonthSelect">
                                    <option value="">Select Month</option>
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Student ID</th>
                                            <th>Name</th>
                                            <th>Present Days</th>
                                            <th>Absent Days</th>
                                            <th>Leave Days</th>
                                            <th>Attendance %</th>
                                        </tr>
                                    </thead>
                                    <tbody id="attendanceReportTableBody">
                                        <!-- Attendance report will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timetable Content -->
            <div id="timetableContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Timetable Management</h3>
                        <button class="btn btn-primary" onclick="showAddTimetableModal()">Add Timetable</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Class</label>
                        <select class="form-control-lg" id="timetableClassSelect">
                            <option value="">Select Class</option>
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Section</label>
                        <select class="form-control-lg" id="timetableSectionSelect">
                            <option value="">Select Section</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </div>
                    <div class="timetable-container">
                        <table class="timetable">
                            <thead>
                                <tr>
                                    <th>Day/Period</th>
                                    <th>1</th>
                                    <th>2</th>
                                    <th>3</th>
                                    <th>4</th>
                                    <th>5</th>
                                    <th>6</th>
                                    <th>7</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Monday</td>
                                    <td><div class="subject-cell">English</div></td>
                                    <td><div class="subject-cell">Mathematics</div></td>
                                    <td><div class="subject-cell">Science</div></td>
                                    <td><div class="subject-cell">Social Science</div></td>
                                    <td><div class="subject-cell">Language</div></td>
                                    <td><div class="subject-cell">Computer</div></td>
                                    <td><div class="subject-cell">Library</div></td>
                                </tr>
                                <tr>
                                    <td>Tuesday</td>
                                    <td><div class="subject-cell">Mathematics</div></td>
                                    <td><div class="subject-cell">English</div></td>
                                    <td><div class="subject-cell">Science</div></td>
                                    <td><div class="subject-cell">Social Science</div></td>
                                    <td><div class="subject-cell">Language</div></td>
                                    <td><div class="subject-cell">Computer</div></td>
                                    <td><div class="subject-cell">Library</div></td>
                                </tr>
                                <tr>
                                    <td>Wednesday</td>
                                    <td><div class="subject-cell">Science</div></td>
                                    <td><div class="subject-cell">Mathematics</div></td>
                                    <td><div class="subject-cell">English</div></td>
                                    <td><div class="subject-cell">Social Science</div></td>
                                    <td><div class="subject-cell">Language</div></td>
                                    <td><div class="subject-cell">Computer</div></td>
                                    <td><div class="subject-cell">Library</div></td>
                                </tr>
                                <tr>
                                    <td>Thursday</td>
                                    <td><div class="subject-cell">Social Science</div></td>
                                    <td><div class="subject-cell">Science</div></td>
                                    <td><div class="subject-cell">Mathematics</div></td>
                                    <td><div class="subject-cell">English</div></td>
                                    <td><div class="subject-cell">Language</div></td>
                                    <td><div class="subject-cell">Computer</div></td>
                                    <td><div class="subject-cell">Library</div></td>
                                </tr>
                                <tr>
                                    <td>Friday</td>
                                    <td><div class="subject-cell">Language</div></td>
                                    <td><div class="subject-cell">Social Science</div></td>
                                    <td><div class="subject-cell">Science</div></td>
                                    <td><div class="subject-cell">Mathematics</div></td>
                                    <td><div class="subject-cell">English</div></td>
                                    <td><div class="subject-cell">Computer</div></td>
                                    <td><div class="subject-cell">Library</div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Marks Content -->
            <div id="marksContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Marks Management</h3>
                        <button class="btn btn-primary" onclick="showAddMarksModal()">Add Marks</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Class</label>
                        <select class="form-control-lg" id="marksClassSelect">
                            <option value="">Select Class</option>
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Section</label>
                        <select class="form-control-lg" id="marksSectionSelect">
                            <option value="">Select Section</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Exam Type</label>
                        <select class="form-control-lg" id="examTypeSelect">
                            <option value="">Select Exam Type</option>
                            <option value="periodic">Periodic Test</option>
                            <option value="midterm">Mid Term</option>
                            <option value="term">Term Exam</option>
                        </select>
                    </div>
                    <div class="table-responsive">
                        <table class="mark-entry-table">
                            <thead>
                                <tr>
                                    <th>Student ID</th>
                                    <th>Name</th>
                                    <th>English</th>
                                    <th>Mathematics</th>
                                    <th>Science</th>
                                    <th>Social Science</th>
                                    <th>Language</th>
                                    <th>Computer</th>
                                    <th>Total</th>
                                    <th>Grade</th>
                                </tr>
                            </thead>
                            <tbody id="marksTableBody">
                                <!-- Marks will be dynamically generated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports Content -->
            <div id="reportsContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Report Management</h3>
                        <button class="btn btn-primary" onclick="showAddReportModal()">Add Report</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Class</label>
                        <select class="form-control-lg" id="reportClassSelect">
                            <option value="">Select Class</option>
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Section</label>
                        <select class="form-control-lg" id="reportSectionSelect">
                            <option value="">Select Section</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select Student</label>
                        <select class="form-control-lg" id="reportStudentSelect">
                            <option value="">Select Student</option>
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                    <div id="reportCardContainer">
                        <!-- Report card will be dynamically generated -->
                    </div>
                </div>
            </div>

            <!-- Bus Tracking Content -->
            <div id="busTrackingContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Bus Tracking System</h3>
                        <button class="btn btn-primary" onclick="refreshBusLocations()">Refresh Locations</button>
                    </div>
                    <div class="bus-tracking-container">
                        <div class="bus-map-container">
                            <div id="busMap"></div>
                        </div>
                        <div class="bus-control-panel">
                            <div class="bus-info-title">
                                <i class="bi bi-bus-front"></i>
                                Bus Information
                            </div>
                            <div class="bus-selector">
                                <label class="form-label">Select Bus</label>
                                <select id="busSelector" class="form-control">
                                    <option value="">Select a bus to view details</option>
                                </select>
                            </div>
                            <div id="busDetails">
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Bus Number:</span>
                                    <span class="bus-info-value" id="selectedBusNumber">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Driver:</span>
                                    <span class="bus-info-value" id="selectedBusDriver">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Route:</span>
                                    <span class="bus-info-value" id="selectedBusRoute">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Status:</span>
                                    <span class="bus-status-indicator" id="selectedBusStatus">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Students:</span>
                                    <span class="bus-info-value" id="selectedBusStudents">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Speed:</span>
                                    <span class="bus-info-value" id="selectedBusSpeed">-</span>
                                </div>
                                <div class="bus-info-item">
                                    <span class="bus-info-label">Last Update:</span>
                                    <span class="bus-info-value" id="selectedBusLastUpdate">-</span>
                                </div>
                            </div>
                            <div class="bus-students-list" id="busStudentsList" style="display: none;">
                                <div class="bus-students-title">Students on Board</div>
                                <div id="busStudentsListContent">
                                    <!-- Students list will be dynamically generated -->
                                </div>
                            </div>
                            <div class="bus-location-history" id="busLocationHistory" style="display: none;">
                                <div class="location-history-title">Recent Locations</div>
                                <div id="locationHistoryContent">
                                    <!-- Location history will be dynamically generated -->
                                </div>
                            </div>
                            <div class="bus-actions">
                                <button class="bus-action-btn primary" onclick="trackSelectedBus()">
                                    <i class="bi bi-geo-alt"></i> Track
                                </button>
                                <button class="bus-action-btn secondary" onclick="messageDriver()">
                                    <i class="bi bi-chat-dots"></i> Message
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h5>All Buses</h5>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Bus Number</th>
                                        <th>Driver Name</th>
                                        <th>Route</th>
                                        <th>Status</th>
                                        <th>Students</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="busTableBody">
                                    <!-- Bus information will be dynamically generated -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Library Content -->
            <div id="libraryContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Library Management</h3>
                        <button class="btn btn-primary" id="addBookBtn" onclick="showAddBookModal()">Add Book</button>
                    </div>
                    <div class="library-stats">
                        <div class="library-stat-card animate__animated animate__fadeInUp">
                            <div class="library-stat-value" id="totalBooks">1,250</div>
                            <div class="library-stat-label">Total Books</div>
                        </div>
                        <div class="library-stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                            <div class="library-stat-value" id="availableBooks">980</div>
                            <div class="library-stat-label">Available</div>
                        </div>
                        <div class="library-stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                            <div class="library-stat-value" id="issuedBooks">270</div>
                            <div class="library-stat-label">Issued</div>
                        </div>
                        <div class="library-stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.3s">
                            <div class="library-stat-value" id="overdueBooks">15</div>
                            <div class="library-stat-label">Overdue</div>
                        </div>
                    </div>
                    <div class="tabs-container">
                        <div class="tabs-header">
                            <button class="tab-btn active" data-tab="all-books">All Books</button>
                            <button class="tab-btn" data-tab="issued-books">Issued Books</button>
                            <button class="tab-btn" data-tab="overdue-books">Overdue Books</button>
                            <button class="tab-btn" data-tab="add-book" id="addBookTabBtn">Add New Book</button>
                        </div>
                        
                        <div class="tab-content active" id="all-books">
                            <div class="library-search-container">
                                <i class="bi bi-search library-search-icon"></i>
                                <input type="text" class="library-search-input" id="bookSearch" placeholder="Search by title, author, or ISBN">
                            </div>
                            <div class="library-filter-container">
                                <button class="library-filter-btn active" data-filter="all">All</button>
                                <button class="library-filter-btn" data-filter="fiction">Fiction</button>
                                <button class="library-filter-btn" data-filter="non-fiction">Non-Fiction</button>
                                <button class="library-filter-btn" data-filter="reference">Reference</button>
                                <button class="library-filter-btn" data-filter="textbook">Textbook</button>
                                <button class="library-filter-btn" data-filter="magazine">Magazine</button>
                                <button class="library-filter-btn" data-filter="journal">Journal</button>
                            </div>
                            <div class="book-grid" id="allBooksGrid">
                                <!-- Books will be dynamically generated -->
                            </div>
                        </div>
                        
                        <div class="tab-content" id="issued-books">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Book ID</th>
                                            <th>Title</th>
                                            <th>Author</th>
                                            <th>Issued To</th>
                                            <th>Issue Date</th>
                                            <th>Due Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="issuedBooksTableBody">
                                        <!-- Issued books will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="overdue-books">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Book ID</th>
                                            <th>Title</th>
                                            <th>Author</th>
                                            <th>Issued To</th>
                                            <th>Issue Date</th>
                                            <th>Due Date</th>
                                            <th>Fine</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="overdueBooksTableBody">
                                        <!-- Overdue books will be dynamically generated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="add-book">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i> To add a new book to the library, please click the "Add Book" button at the top of the page.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Driver Content (Only for Driver Role) -->
            <div id="driverContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Bus Location Sharing</h3>
                        <button class="btn btn-primary" id="shareLocationBtn" onclick="toggleLocationSharing()">Share Location</button>
                    </div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> Click "Share Location" to start sharing your live location with parents and school administration.
                    </div>
                    <div class="bus-tracking-container">
                        <div class="bus-map-container">
                            <div id="driverBusMap"></div>
                        </div>
                        <div class="bus-control-panel">
                            <div class="bus-info-title">
                                <i class="bi bi-bus-front"></i>
                                Your Bus Information
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Bus Number:</span>
                                <span class="bus-info-value" id="driverBusNumber">AV01</span>
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Route:</span>
                                <span class="bus-info-value" id="driverRoute">Ettimadai - Coimbatore</span>
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Status:</span>
                                <span class="bus-status-indicator" id="driverStatus">Inactive</span>
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Students on Board:</span>
                                <span class="bus-info-value" id="studentsOnBoard">0</span>
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Current Speed:</span>
                                <span class="bus-info-value" id="driverSpeed">0 km/h</span>
                            </div>
                            <div class="bus-info-item">
                                <span class="bus-info-label">Last Update:</span>
                                <span class="bus-info-value" id="driverLastUpdate">-</span>
                            </div>
                            <div class="bus-location-history" id="driverLocationHistory">
                                <div class="location-history-title">Recent Locations</div>
                                <div id="driverLocationHistoryContent">
                                    <!-- Location history will be dynamically generated -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages Content -->
            <div id="messagesContent" style="display: none;">
                <div class="content-card animate__animated animate__fadeIn">
                    <div class="card-header">
                        <h3 class="card-title">Messages</h3>
                        <button class="btn btn-primary" onclick="showComposeMessageModal()">Compose</button>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="list-group">
                                <a href="#" class="list-group-item list-group-item-action active">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Admin</h6>
                                        <small>3 mins ago</small>
                                    </div>
                                    <p class="mb-1">Please submit your weekly reports...</p>
                                    <small>School Administration</small>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Class 5-A Students</h6>
                                        <small>1 hour ago</small>
                                    </div>
                                    <p class="mb-1">Thank you for the extra help...</p>
                                    <small>Multiple Students</small>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Sarah Johnson</h6>
                                        <small>Yesterday</small>
                                    </div>
                                    <p class="mb-1">Thank you for the update on Bob...</p>
                                    <small>Parent</small>
                                </a>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <div class="d-flex align-items-center">
                                        <div class="user-avatar me-2">AD</div>
                                        <div>
                                            <h6 class="mb-0">Admin</h6>
                                            <small>School Administration</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="message-container">
                                        <div class="message">
                                            <div class="message-avatar">AD</div>
                                            <div class="message-content">
                                                <div class="message-text">Hi, please submit your weekly reports by end of day.</div>
                                                <div class="message-time">10:30 AM</div>
                                            </div>
                                        </div>
                                        <div class="message sent">
                                            <div class="message-avatar">TC</div>
                                            <div class="message-content">
                                                <div class="message-text">Sure, I'll submit them by 4 PM today.</div>
                                                <div class="message-time">10:32 AM</div>
                                            </div>
                                        </div>
                                        <div class="message">
                                            <div class="message-avatar">AD</div>
                                            <div class="message-content">
                                                <div class="message-text">Thank you. Also, please remember the parent-teacher meeting tomorrow.</div>
                                                <div class="message-time">10:35 AM</div>
                                            </div>
                                        </div>
                                        <div class="message sent">
                                            <div class="message-avatar">TC</div>
                                            <div class="message-content">
                                                <div class="message-text">I'll be there. Is there anything specific I need to prepare?</div>
                                                <div class="message-time">10:38 AM</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="message-input-container">
                                        <input type="text" class="message-input" placeholder="Type a message...">
                                        <button class="message-send-btn">
                                            <i class="bi bi-send"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Student Modal -->
    <div class="modal" id="addStudentModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add New Student</h3>
                <button class="modal-close" onclick="closeModal('addStudentModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Student Name</label>
                    <input type="text" class="form-control-lg" id="studentName" placeholder="Enter student name">
                </div>
                <div class="form-group">
                    <label class="form-label">Class</label>
                    <select class="form-control-lg" id="studentClass">
                        <option value="">Select Class</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Section</label>
                    <select class="form-control-lg" id="studentSection">
                        <option value="">Select Section</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Date of Birth</label>
                    <input type="date" class="form-control-lg" id="studentDOB">
                </div>
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <select class="form-control-lg" id="studentGender">
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Parent Name</label>
                    <input type="text" class="form-control-lg" id="parentName" placeholder="Enter parent name">
                </div>
                <div class="form-group">
                    <label class="form-label">Parent Phone</label>
                    <input type="tel" class="form-control-lg" id="parentPhone" placeholder="Enter parent phone number">
                </div>
                <div class="form-group">
                    <label class="form-label">Parent Email</label>
                    <input type="email" class="form-control-lg" id="parentEmail" placeholder="Enter parent email">
                </div>
                <div class="form-group" id="studentContactGroup" style="display: none;">
                    <label class="form-label">Student Phone (For Class 11-12)</label>
                    <input type="tel" class="form-control-lg" id="studentPhone" placeholder="Enter student phone number">
                </div>
                <div class="form-group" id="studentEmailGroup" style="display: none;">
                    <label class="form-label">Student Email (For Class 11-12)</label>
                    <input type="email" class="form-control-lg" id="studentEmail" placeholder="Enter student email">
                </div>
                <div class="form-group">
                    <label class="form-label">Transport</label>
                    <div class="bus-selection">
                        <div class="bus-option" data-bus="school">
                            <div class="bus-icon">
                                <i class="bi bi-bus-front"></i>
                            </div>
                            <div class="bus-label">School Bus</div>
                            <div class="bus-description">School transport facility</div>
                        </div>
                        <div class="bus-option" data-bus="private">
                            <div class="bus-icon">
                                <i class="bi bi-truck"></i>
                            </div>
                            <div class="bus-label">Private Bus</div>
                            <div class="bus-description">Private transport facility</div>
                        </div>
                        <div class="bus-option" data-bus="local">
                            <div class="bus-icon">
                                <i class="bi bi-person-walking"></i>
                            </div>
                            <div class="bus-label">Local</div>
                            <div class="bus-description">Local transport</div>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="busNumberGroup" style="display: none;">
                    <label class="form-label">Bus Number</label>
                    <select class="form-control-lg" id="busNumber">
                        <option value="">Select Bus Number</option>
                        <!-- Options will be dynamically generated based on transport type -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Address</label>
                    <textarea class="form-control-lg" id="studentAddress" placeholder="Enter address" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addStudentModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addStudent()">Add Student</button>
            </div>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div class="modal" id="addTeacherModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add New Teacher</h3>
                <button class="modal-close" onclick="closeModal('addTeacherModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Teacher Name</label>
                    <input type="text" class="form-control-lg" id="teacherName" placeholder="Enter teacher name">
                </div>
                <div class="form-group">
                    <label class="form-label">Subject</label>
                    <select class="form-control-lg" id="teacherSubject">
                        <option value="">Select Subject</option>
                        <option value="English">English</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Science">Science</option>
                        <option value="Social Science">Social Science</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Tamil">Tamil</option>
                        <option value="Computer Science">Computer Science</option>
                        <option value="Physical Education">Physical Education</option>
                        <option value="Art">Art</option>
                        <option value="Music">Music</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Class Teacher</label>
                    <select class="form-control-lg" id="classTeacher">
                        <option value="">Select Class</option>
                        <option value="LKG-A">LKG - A</option>
                        <option value="LKG-B">LKG - B</option>
                        <option value="LKG-C">LKG - C</option>
                        <option value="LKG-D">LKG - D</option>
                        <option value="UKG-A">UKG - A</option>
                        <option value="UKG-B">UKG - B</option>
                        <option value="UKG-C">UKG - C</option>
                        <option value="UKG-D">UKG - D</option>
                        <option value="1-A">Class 1 - A</option>
                        <option value="1-B">Class 1 - B</option>
                        <option value="1-C">Class 1 - C</option>
                        <option value="1-D">Class 1 - D</option>
                        <option value="2-A">Class 2 - A</option>
                        <option value="2-B">Class 2 - B</option>
                        <option value="2-C">Class 2 - C</option>
                        <option value="2-D">Class 2 - D</option>
                        <option value="3-A">Class 3 - A</option>
                        <option value="3-B">Class 3 - B</option>
                        <option value="3-C">Class 3 - C</option>
                        <option value="3-D">Class 3 - D</option>
                        <option value="4-A">Class 4 - A</option>
                        <option value="4-B">Class 4 - B</option>
                        <option value="4-C">Class 4 - C</option>
                        <option value="4-D">Class 4 - D</option>
                        <option value="5-A">Class 5 - A</option>
                        <option value="5-B">Class 5 - B</option>
                        <option value="5-C">Class 5 - C</option>
                        <option value="5-D">Class 5 - D</option>
                        <option value="6-A">Class 6 - A</option>
                        <option value="6-B">Class 6 - B</option>
                        <option value="6-C">Class 6 - C</option>
                        <option value="6-D">Class 6 - D</option>
                        <option value="7-A">Class 7 - A</option>
                        <option value="7-B">Class 7 - B</option>
                        <option value="7-C">Class 7 - C</option>
                        <option value="7-D">Class 7 - D</option>
                        <option value="8-A">Class 8 - A</option>
                        <option value="8-B">Class 8 - B</option>
                        <option value="8-C">Class 8 - C</option>
                        <option value="8-D">Class 8 - D</option>
                        <option value="9-A">Class 9 - A</option>
                        <option value="9-B">Class 9 - B</option>
                        <option value="9-C">Class 9 - C</option>
                        <option value="9-D">Class 9 - D</option>
                        <option value="10-A">Class 10 - A</option>
                        <option value="10-B">Class 10 - B</option>
                        <option value="10-C">Class 10 - C</option>
                        <option value="10-D">Class 10 - D</option>
                        <option value="11-A">Class 11 - A</option>
                        <option value="11-B">Class 11 - B</option>
                        <option value="11-C">Class 11 - C</option>
                        <option value="12-A">Class 12 - A</option>
                        <option value="12-B">Class 12 - B</option>
                        <option value="12-C">Class 12 - C</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-control-lg" id="teacherPhone" placeholder="Enter phone number">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control-lg" id="teacherEmail" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label class="form-label">Address</label>
                    <textarea class="form-control-lg" id="teacherAddress" placeholder="Enter address" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addTeacherModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addTeacher()">Add Teacher</button>
            </div>
        </div>
    </div>

    <!-- Add Class Modal -->
    <div class="modal" id="addClassModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add New Class</h3>
                <button class="modal-close" onclick="closeModal('addClassModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Class</label>
                    <select class="form-control-lg" id="newClass">
                        <option value="">Select Class</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Section</label>
                    <select class="form-control-lg" id="newSection">
                        <option value="">Select Section</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Class Head</label>
                    <input type="text" class="form-control-lg" id="classHead" placeholder="Enter class head name">
                </div>
                <div class="form-group">
                    <label class="form-label">Class Teacher</label>
                    <select class="form-control-lg" id="newClassTeacher">
                        <option value="">Select Teacher</option>
                        <!-- Options will be dynamically generated -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Room Number</label>
                    <input type="text" class="form-control-lg" id="roomNumber" placeholder="Enter room number">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addClassModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addClass()">Add Class</button>
            </div>
        </div>
    </div>

    <!-- Add Announcement Modal -->
    <div class="modal" id="addAnnouncementModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add Announcement</h3>
                <button class="modal-close" onclick="closeModal('addAnnouncementModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-control-lg" id="announcementTitle" placeholder="Enter announcement title">
                </div>
                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-control-lg" id="announcementContent" placeholder="Enter announcement content" rows="5"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Target Audience</label>
                    <select class="form-control-lg" id="announcementTarget">
                        <option value="all">All School</option>
                        <option value="teachers">Teachers Only</option>
                        <option value="students">Students Only</option>
                        <option value="parents">Parents Only</option>
                        <option value="class">Specific Class</option>
                    </select>
                </div>
                <div class="form-group" id="announcementClassGroup" style="display: none;">
                    <label class="form-label">Select Class</label>
                    <select class="form-control-lg" id="announcementClass">
                        <option value="">Select Class</option>
                        <!-- Options will be dynamically generated -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-control-lg" id="announcementPriority">
                        <option value="normal">Normal</option>
                        <option value="important">Important</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addAnnouncementModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addAnnouncement()">Add Announcement</button>
            </div>
        </div>
    </div>

    <!-- Compose Message Modal -->
    <div class="modal" id="composeMessageModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Compose Message</h3>
                <button class="modal-close" onclick="closeModal('composeMessageModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="message-compose-container">
                    <div class="form-group">
                        <label class="form-label">To</label>
                        <select class="form-control-lg" id="messageTo">
                            <option value="">Select Recipient</option>
                            <option value="admin">Admin</option>
                            <option value="class">My Class Students</option>
                            <option value="parents">My Class Parents</option>
                            <!-- Options will be dynamically generated based on user role -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Subject</label>
                        <input type="text" class="form-control-lg" id="messageSubject" placeholder="Enter subject">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="form-control-lg" id="messageContent" placeholder="Enter message" rows="5"></textarea>
                    </div>
                    <div class="message-options-container">
                        <div class="message-option">
                            <input class="form-check-input" type="checkbox" id="sendSMS" checked>
                            <label class="form-check-label" for="sendSMS">SMS</label>
                        </div>
                        <div class="message-option">
                            <input class="form-check-input" type="checkbox" id="sendEmail" checked>
                            <label class="form-check-label" for="sendEmail">Email</label>
                        </div>
                        <div class="message-option">
                            <input class="form-check-input" type="checkbox" id="sendWhatsApp">
                            <label class="form-check-label" for="sendWhatsApp">WhatsApp</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('composeMessageModal')">Cancel</button>
                <button class="btn btn-primary" onclick="sendMessage()">Send Message</button>
            </div>
        </div>
    </div>

    <!-- Add Book Modal -->
    <div class="modal" id="addBookModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add New Book</h3>
                <button class="modal-close" onclick="closeModal('addBookModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addBookForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Book Title</label>
                                <input type="text" class="form-control-lg" id="bookTitle" placeholder="Enter book title" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Author</label>
                                <input type="text" class="form-control-lg" id="bookAuthor" placeholder="Enter author name" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">ISBN</label>
                                <input type="text" class="form-control-lg" id="bookISBN" placeholder="Enter ISBN">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Category</label>
                                <select class="form-control-lg" id="bookCategory">
                                    <option value="">Select Category</option>
                                    <option value="fiction">Fiction</option>
                                    <option value="non-fiction">Non-Fiction</option>
                                    <option value="reference">Reference</option>
                                    <option value="textbook">Textbook</option>
                                    <option value="magazine">Magazine</option>
                                    <option value="journal">Journal</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Publisher</label>
                                <input type="text" class="form-control-lg" id="bookPublisher" placeholder="Enter publisher name">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Publication Year</label>
                                <input type="number" class="form-control-lg" id="bookYear" placeholder="Enter publication year" min="1900" max="2024">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Quantity</label>
                                <input type="number" class="form-control-lg" id="bookQuantity" placeholder="Enter quantity" min="1" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control-lg" id="bookLocation" placeholder="Enter shelf location">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-control-lg" id="bookDescription" placeholder="Enter book description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addBookModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addBook()">Add Book</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon success">
            <i class="bi bi-check-lg"></i>
        </div>
        <div class="toast-content">
            <div class="toast-title">Success</div>
            <div class="toast-message">Operation completed successfully!</div>
        </div>
        <button class="toast-close" onclick="hideToast()">
            <i class="bi bi-x"></i>
        </button>
    </div>

    <!-- Mark Attendance Modal -->
    <div class="modal" id="markAttendanceModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Mark Attendance</h3>
                <button class="modal-close" onclick="closeModal('markAttendanceModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-control-lg" id="attendanceDate" required>
                </div>
                <div id="attendanceList" class="attendance-list">
                    <!-- Student attendance rows will be dynamically generated -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('markAttendanceModal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveAttendance()">Save Attendance</button>
            </div>
        </div>
    </div>

    <!-- Add Marks Modal -->
    <div class="modal" id="addMarksModal">
        <div class="modal-content large animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add Marks</h3>
                <button class="modal-close" onclick="closeModal('addMarksModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Class</label>
                            <select class="form-control-lg" id="modalMarksClass" required>
                                <option value="">Select Class</option>
                                <option value="1">Class 1</option>
                                <option value="2">Class 2</option>
                                <option value="3">Class 3</option>
                                <option value="4">Class 4</option>
                                <option value="5">Class 5</option>
                                <option value="6">Class 6</option>
                                <option value="7">Class 7</option>
                                <option value="8">Class 8</option>
                                <option value="9">Class 9</option>
                                <option value="10">Class 10</option>
                                <option value="11">Class 11</option>
                                <option value="12">Class 12</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Section</label>
                            <select class="form-control-lg" id="modalMarksSection" required>
                                <option value="">Select Section</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Exam Type</label>
                            <select class="form-control-lg" id="modalExamType" required>
                                <option value="">Select Exam</option>
                                <option value="periodic">Periodic Test</option>
                                <option value="midterm">Mid Term</option>
                                <option value="term">Term Exam</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="alert alert-info mt-3">
                    Select class and section above, then use the Marks Management page to enter marks for students.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addMarksModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Add Timetable Modal -->
    <div class="modal" id="addTimetableModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Add Timetable</h3>
                <button class="modal-close" onclick="closeModal('addTimetableModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    Timetable management feature allows you to create and manage class schedules. This feature is coming soon!
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal('addTimetableModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Add Report Modal -->
    <div class="modal" id="addReportModal">
        <div class="modal-content animate__animated animate__fadeInUp">
            <div class="modal-header">
                <h3 class="modal-title">Generate Report</h3>
                <button class="modal-close" onclick="closeModal('addReportModal')">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Report Type</label>
                    <select class="form-control-lg" id="reportTypeSelect" required>
                        <option value="">Select Report Type</option>
                        <option value="progress">Progress Report</option>
                        <option value="attendance">Attendance Report</option>
                        <option value="performance">Performance Report</option>
                        <option value="conduct">Conduct Report</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Term</label>
                    <select class="form-control-lg" id="reportTerm" required>
                        <option value="">Select Term</option>
                        <option value="1">Term 1</option>
                        <option value="2">Term 2</option>
                        <option value="3">Term 3</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addReportModal')">Cancel</button>
                <button class="btn btn-primary" onclick="generateReport()">Generate</button>
            </div>
        </div>
    </div>

    <!-- Floating Action Buttons (Admin Only) -->
    <div class="floating-actions" id="floatingActions">
        <button class="fab secondary" id="fabTeacher" onclick="showAddTeacherModal()" title="Add Teacher">
            <i class="bi bi-person-plus"></i>
        </button>
        <button class="fab secondary" id="fabStudent" onclick="showAddStudentModal()" title="Add Student">
            <i class="bi bi-person-plus"></i>
        </button>
        <button class="fab pulse" id="fabAnnouncement" onclick="showAddAnnouncementModal()" title="Add Announcement">
            <i class="bi bi-megaphone"></i>
        </button>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Application JavaScript Modules -->
    <script src="js/data/state.js"></script>
    <script src="js/data/sampleData.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
